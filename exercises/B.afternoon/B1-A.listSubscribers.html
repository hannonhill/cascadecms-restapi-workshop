<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <script src="../../creds.js"></script>
    <script src="../../cascade-restapi.js"></script>
</head>

<body>
    <div>
        <h1>Exercise B1-A. List Subscribers</h1>
    </div>

    <script>
        /* Note: Think of subscribers as relationships
           listing the subscribers of a content type will give you pages
           listing the subscribers of a page will give you blocks/pages where that page is attached/linked 
           listing the subscribers of a block will give you blocks/pages where that block is attached
           listing the subscribers of a file will give you blocks/pages where that file is attached/linked  */

        /* Exercise B1-A: Get the subscribers of an asset using asset ID  */

        /* Step 1.1: Add the ID of an asset on line 25 */
        /* Step 1.2: Add the type of the asset on line 24 */
        /* Step 1.3: Save, open file in browser, view console log */
        /* Bonus Exercise: Attach a manual relationship to the asset in Cascade, refresh browser, see the manual subscriber in the console log */

        listSubscribers({
            type: "file", // fill in
            id: "68e16244c0a8002f77f581826b6ab573", // fill in
        }).then(function (result) {
            console.log("List Subscribers response:", result);

            // You can see all subscribers (relationships) created by linking and/or attaching by using dot notation to drill down to the subscribers array
            console.log("Subscribers:", result.apiReturn.subscribers);

            // Manual subscribers are also available 
            console.log("Manual Subscribers:", result.apiReturn.manualSubscribers);

        }).catch(function (error) {
            console.log(error);
        });
    </script>
</body>

</html>