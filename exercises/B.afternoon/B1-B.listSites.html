<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">

<head>
    <script src="../../creds.js"></script>
    <script src="../../cascade-restapi.js"></script>
</head>

<body>
    <div>
        <h1>Exercise B1-B. List Sites</h1>
    </div>
    <script>
        /* Exercise B1-B: List all sites you can read in the CMS  */

        /* Step 1.1: Open file in browser and view console log */

        listSites({}).then(function (result) {
            console.log(result);
            var sites = result.apiReturn.sites;
            sites.forEach(function (site) {
                // Note: loop over the sites and read each site
                // console.log(site);
                readAsset({
                    type: "site",
                    id: site.id,
                }).then(function (result) {
                    console.log(result);
                    // Note: result is the object the read function returns
                }).catch(function (error) {
                    console.log(error);
                });

            });
        }).catch(function (error) {
            console.log(error);
        });
    </script>
</body>

</html>